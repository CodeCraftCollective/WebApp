{% extends "main/base.html" %}

{% block content %}
<style>
    body {
        height: 100vh;
        background: linear-gradient(45deg, #5D8AA8, #003366);
        color: #d3d3d3;
        display: flex;
        justify-content: center;
        align-items: center;
        font-family: Arial, sans-serif;
        margin: 0;
    }

    .container {
        width: 500px;
        height: 350px;
        perspective: 800px;
        position: relative;
        padding: 50px 10px;
    }

    .card {
        height: 100%;
        width: 100%;
        position: absolute;
        transition: transform 1500ms;
        transform-style: preserve-3d;
    }

    .front,
    .back {
        height: 100%;
        width: 100%;
        position: absolute;
        backface-visibility: hidden;
        background-color: #3a3a3a;
        display: flex;
        justify-content: center;
        align-items: center;
        border-radius: 8px;
    }

    .back {
        transform: rotateY(180deg);
    }

    .card.is-flipped {
        transform: rotateY(180deg);
    }

    .buttons {
        margin-top: 20px;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    button {
        padding: 10px 20px;
        cursor: pointer;
        border: none;
        border-radius: 5px;
        margin: 0 10px;
        background-color: #5D8AA8;
        color: #fff;
        font-weight: bold;
        transition: background-color 0.3s ease;
    }

    button:hover {
        background-color: #003366;
    }
</style>

<div class="buttons">
    <button id="prev" disabled>Previous</button>
    <button id="shuffle">Shuffle</button>
    <button id="next">Next</button>
</div>

<div id="flashcard-container" class="container">
    <!-- Flashcard will be inserted here by JavaScript -->
</div>

<script>
    const flashcardsData = {{ flashcards|safe }};
    let currentCardIndex = 0;

    function createCardElement(cardData) {
        const container = document.createElement('div');
        container.className = 'card';

        const front = document.createElement('div');
        front.className = 'front';
        front.textContent = cardData.front;

        const back = document.createElement('div');
        back.className = 'back';
        back.textContent = cardData.back;

        container.appendChild(front);
        container.appendChild(back);

        container.addEventListener('click', function () {
            container.classList.toggle('is-flipped');
        });

        return container;
    }

    function updateCard() {
        const flashcardContainer = document.getElementById('flashcard-container');
        flashcardContainer.innerHTML = '';

        const cardElement = createCardElement(flashcardsData[currentCardIndex]);
        flashcardContainer.appendChild(cardElement);

        document.getElementById('prev').disabled = currentCardIndex === 0;
        document.getElementById('next').disabled = currentCardIndex === flashcardsData.length - 1;
    }

    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }

    document.getElementById('shuffle').addEventListener('click', function () {
        shuffleArray(flashcardsData);
        currentCardIndex = 0;
        updateCard();
    });

    document.getElementById('next').addEventListener('click', function () {
        if (currentCardIndex < flashcardsData.length - 1) {
            currentCardIndex++;
            updateCard();
        }
    });

    document.getElementById('prev').addEventListener('click', function () {
        if (currentCardIndex > 0) {
            currentCardIndex--;
            updateCard();
        }
    });

    updateCard();
</script>
{% endblock %}

